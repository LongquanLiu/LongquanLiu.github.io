---
title: Imooc Java Primary II Chap4 多态
date: 2018-11-26 16:40:00
tags: Java Imooc
---

## 4.1 多态

1. 对象的多种形态
2. 引用多态
  * 父类的引用可以指向本类的对象
  * 父类的引用可以指向子类的对象
3. 方法多态
  * 创建本类对象时，调用的方法为本类方法
  * 创建子类对象时，调用的方法为子类重写的方法或者继承的方法
4. 继承是实现多态的基础
5. **父类的引用不可以调用子类独有的方法**

## 4.2 多态中的**引用**类型转换

1. 向上类型转换（隐式/自动类型转换），是小类型到大类型的转换。杯子——茶壶（安全）
2. 向下类型转换（强制类型转换），是大类型到小类型。茶壶——杯子（不安全）
3. **instanceof** 运算符，来解决引用对象的类型，避免类型转换的安全性问题
``` Java
if(animal instanceof Cat){
  Cat cat =(Cat)animal;
}else{
  System.out.println("无法进行类型转换")
}
```

## 4.3 抽象类 abstract

1. 应用场景：
  * 某个父类只知道子类应该包含怎样的方法，但无法准确知道这些子类如何实现这些方法。
  * 从多个具有相同特征的类中抽象出一个抽象类，以这个抽象类作为子类的模板，从而避免子类设计的随意性。
2. 作用：限制规定子类必须实现某些方法，但不关注实现细节
3. 使用规则：
  * abstract定义抽象类
  * abstract定义抽象方法，只有声明，不需要实现
  * 包含抽象方法的类是抽象类
  * 抽象类中可以包含普通的方法，也可以没有抽象的方法
  * 抽象类不能直接创建，可以定义引用变量
4. 抽象方法没有方法体以分号结束;

## 4.4 接口 interface implements

1. 接口可以理解为一种特殊的类，由**全局常量和公共的抽象方法**所组成
2. 类是一种具体实现体，而接口定义了某一批类所需要遵守的**规范**，接口不关心这些类内部的数据，也不关心这些类里方法的实现细节，它只规定这些类必须提供某些方法
3. 接口定义的基本语法：
```java
[修饰符] interface 接口名 [extends 父接口1,父接口2...]
{
  零个到多个常量定义...
  零个到多个抽象方法定义...
}
// 接口就是用来被继承实现的，修饰符一般建议用'public',不能使用private和protected修饰接口
// 隐式abstract
// 接口可以多继承
```
4. 接口定义
  * 常量：接口中的属性是常量，即使定义时不添加public static final 修饰符，系统也会自动加上
  * 方法：接口中的方法只能是抽象方法，总是使用，即使定义时不添加public abstract 修饰符，系统也会自动加上
5. 使用接口：一个类可以实现一个或多个接口，实现接口使用implements关键字。Java中一个类只能继承一个父类，是不够灵活的，通过实现多个接口可以做补充。
  * 继承父类实现接口的语法为：
  ```java
  [修饰符] class 类名 extends 父类 implements 接口1， 接口2 ...
  {
    类体部分//如果继承了抽象类，需要实现继承的抽象方法；要实现接口中的抽象方法
  }
  // 如果要继承父类，继承父类必须在实现接口之前
  ```
6. **接口引用**来使用实现接口的类
  接口名 接口引用 = new 实现接口的类();
7. 使用接口：
  * 接口在使用过程中，还可以与匿名内部类配合使用
  * 匿名内部类就是没有名字的内部类，多用于关注实现而不关注实现类的名称
  语法格式：
  ```java
  Interface i = new Interface(){
    public void method(){
      System.out.println("匿名内部类实现接口的方式1");
    }
  };
  // 注意实现后的分号
  // 即使用接口的引用然后new实现，调用实现的方法

  new Interface(){
    public void method(){
      System.out.println("匿名内部类实现接口的方式2");
    }
  }.method();
  // 直接new实现，调用实现的方法 Android和框架常用
  ```

## 4.5 UML简介

1. Unified Modeling Language(UML), **统一建模语言**或标准建模语言。是一个支持模型化和软件系统开发的图形化语言，为软件开发的所有阶段提供模型化和可视化的支持。
2. 常用UML图
  1. 用例图(The Use Case Diagram)，能够以可视化的方式，表达系统如何满足所收集的业务规则，以及特定的**用户需求**等信息。
  2. 序列图(The Sequence Diagram)，用于按照交互发生的一系列顺序，显示对象之间的这些交互。
  3. 类图(The Class Diagram)，UML类图、业务逻辑和所有支持结构一同被用于定义全部的结构代码。
3. UML建模工具：（**类图可直接生成代码**）
  1. Rational Rose,IBM
  2. Visio,MS
  3. PowerDesigner

## 4.6 综合练习 ‘dada租车系统’

1. 项目分析
  1. 数据模型分析
    * 通过对现实世界的事与物主要特征的分析、抽象，为信息系统的实施提供数据存取的数据结构及相应的约束。
    * 数据结构组成：操作（方法）、属性
  2. 业务模型分析
    * 在设计应用程序之前，应该明确应用程序必须执行哪些任务。确认业务需求的目的在于创建一个能同时满足零售商和消费者需要的解决方案。
  3. 显示和流程分析
    * 显示：用户可以看到的信息提示界面
    * 流程：显示信息的执行过程、步骤
